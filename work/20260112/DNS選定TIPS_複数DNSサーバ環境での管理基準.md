# DNS選定TIPS - 複数DNSサーバ環境での新規ドメイン管理基準

社内に複数のDNSサーバ（オンプレミス、AWS Route53、Azure DNS、お名前.com）が存在する環境において、新規ドメインをどのDNSサーバで管理すべきかを判断するための実務的なガイドラインです。

---

## 📋 DNSサーバ選定 10のTIPS

### 1. ウェブサイトとメールのドメイン統合
**ウェブサイトとメールで同一ドメインを使用する場合は、ALIASレコード対応のAWS Route53を選択する**
Route53のALIASレコードを使用することで、Zone Apexドメイン（example.com）でもCDNやロードバランサーへのマッピングが可能になり、ウェブとメールの共存が容易になります。

### 2. 大量サブドメイン登録への対応
**サブドメインを500以上登録する必要がある場合は、AWS Route53を選択する**
Route53は1つのHosted Zoneで10,000以上のレコード登録が可能です。お名前.comなどの一般的なDNSサービスは数百件程度の制限があるため、マイクロサービスやマルチテナント環境では Route53が適しています。

### 3. メール送信セキュリティの実装
**独自ドメインからメール送信を行う場合は、SPF/DKIM/DMARCレコードの実装が必須**
なりすまし防止とメール到達率向上のため、TXTレコードでSPF、DKIMを設定し、DMARCポリシーを適用します。すべてのDNSサーバで対応可能ですが、AWS Route53やAzure DNSはAPI経由での自動設定が容易です。

### 4. コストパフォーマンスの最適化
**管理ドメイン数が3個以下の小規模運用では、お名前.comやオンプレミスDNSを選択する**
Route53は1ホストゾーンあたり月額$0.50かかるため、少数ドメインの静的管理ではコスト面でお名前.comが有利です。一方、10ドメイン以上の大規模運用やAPI管理が必要な場合はRoute53の方が総コストは低くなります。

### 5. AWSサービスとの統合要件
**CloudFront、ELB、S3などのAWSリソースと連携する場合は、Route53を選択する**
Route53のALIASレコードによりAWSリソースへの直接マッピングが可能で、ヘルスチェック、フェイルオーバー、加重ルーティングなどの高度な機能が利用できます。マルチリージョン構成にも最適です。

### 6. DNSSEC対応の必要性
**セキュリティ要件でDNSSECが必須の場合は、Route53またはAzure DNSを選択する**
DNSSECによる署名検証が必要な金融系システムや公的機関のドメインでは、DNSSEC対応のDNSサーバが必須です。お名前.comは一部プランのみ対応、オンプレミスは構成が複雑になるため、クラウドDNSが推奨されます。

### 7. Infrastructure as Code（IaC）対応
**Terraform、CloudFormation、Bicepなどでインフラ管理する場合は、クラウドDNS（Route53/Azure DNS）を選択する**
API駆動でDNSレコードを管理する必要がある環境では、完全なAPI対応のRoute53やAzure DNSが適しています。CI/CDパイプラインでのDNS自動更新、GitOps運用にも対応可能です。

### 8. 可用性とSLA要件
**ビジネスクリティカルなサービスで99.9%以上のSLAが必要な場合は、AWS Route53を選択する**
Route53は100%の可用性SLAを提供し、グローバルに分散されたエニーキャストネットワークで高い冗長性を実現します。オンプレミスDNSは単一障害点になりやすく、お名前.comはSLA保証がないため、重要システムには不向きです。

### 9. 変更頻度とデプロイメント要件
**DNSレコードの変更が週に複数回発生する場合は、API対応のRoute53またはAzure DNSを選択する**
頻繁にレコード変更が発生する開発環境、A/Bテスト環境、カナリアデプロイメント環境では、API経由での迅速な変更が可能なクラウドDNSが必須です。手動変更が中心のお名前.comでは運用負荷が高くなります。

### 10. コンプライアンスとデータ所在地
**データ所在地規制がある場合は、リージョン選択可能なAzure DNS、または国内オンプレミスDNSを選択する**
GDPR、個人情報保護法などでデータ所在地が制限される場合、Azure DNSは明示的にリージョンを選択可能です。Route53は米国にデータが保存されるため、規制によっては国内オンプレミスDNSやAzure DNSが必要になります。

---

## 🎯 クイック判定フローチャート

```
新規ドメイン登録
    ↓
AWSサービス連携必要？
    YES → Route53
    NO  ↓
サブドメイン500以上？
    YES → Route53
    NO  ↓
IaC/API管理必要？
    YES → Route53 / Azure DNS
    NO  ↓
データ所在地規制あり？
    YES → Azure DNS / オンプレミス
    NO  ↓
ドメイン数3個以下？
    YES → お名前.com / オンプレミス
    NO  → Route53
```

---

## 📊 DNSサーバ比較表

| 項目 | AWS Route53 | Azure DNS | お名前.com | オンプレミス |
|-----|-------------|-----------|------------|-------------|
| ALIASレコード | ⭕ | ⭕ (ALIAS相当) | ❌ | ❌ |
| 最大レコード数 | 10,000+ | 10,000+ | 300-500 | 制限なし |
| API対応 | ⭕ 完全対応 | ⭕ 完全対応 | ⚠️ 一部対応 | ⚠️ 実装次第 |
| DNSSEC | ⭕ | ⭕ | ⚠️ 一部プラン | ⭕ |
| 可用性SLA | 100% | 99.99% | なし | 実装次第 |
| 月額コスト（1ドメイン） | $0.50~ | $0.50~ | $100円~ | 運用コスト |
| データ所在地指定 | ❌ | ⭕ | ❌ | ⭕ |

---

## 📝 補足事項

### Route53使用時の注意点
- ホストゾーン課金（$0.50/月）に加え、クエリ課金（100万クエリあたり$0.40）が発生
- 削除保護設定を有効化して誤削除を防止
- CloudWatch Logsでクエリログを取得可能

### Azure DNS使用時の注意点
- Azureサブスクリプションが必要
- Private DNS ZoneとPublic DNS Zoneで料金体系が異なる
- Azure Monitorでメトリクス監視が可能

### お名前.com使用時の注意点
- GUI操作が中心で大量レコード管理は非効率
- APIは最近追加されたが機能制限あり
- ドメイン取得とDNS管理がセットで利用しやすい

### オンプレミスDNS使用時の注意点
- BIND、PowerDNS、Windows DNS Server等の選択肢
- 冗長構成、セキュリティパッチ適用、監視が必要
- 外部公開する場合はDDoS対策が必須

---

## 🔗 参考情報

- [AWS Route53 料金](https://aws.amazon.com/jp/route53/pricing/)
- [Azure DNS 料金](https://azure.microsoft.com/ja-jp/pricing/details/dns/)
- [RFC 8482 - Providing Minimal-Sized Responses to DNS Queries](https://datatracker.ietf.org/doc/html/rfc8482)
- [DMARC.org - Domain-based Message Authentication](https://dmarc.org/)

---

**作成日**: 2026-01-12
**バージョン**: 1.0
